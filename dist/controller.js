!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=14)}([function(t,e,n){"use strict";n.d(e,"h",function(){return l}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return d}),n.d(e,"f",function(){return h}),n.d(e,"e",function(){return y}),n.d(e,"a",function(){return v}),n.d(e,"c",function(){return x}),n.d(e,"g",function(){return O});var r=n(3),o=n(6),i=n.n(o);function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"rotate(".concat(n," ").concat(t," ").concat(e,") translate(").concat(t,", ").concat(e,") scale(").concat(r,")")},u=function(t){return t*(Math.PI/180)},f=function(t,e,n,r,o){return r+(t-e)/(n-e)*(o-r)},d=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},h=function(t){return c(t.sort(function(){return Math.random()-.5}))},g="http://www.w3.org/2000/svg";function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])}),Object.keys(n).forEach(function(e){t.style[e]=n[e]}),t}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=document.createElement(t);return p(o,e,n),r&&r.appendChild(o),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.apply(void 0,[o].concat(e))}}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=document.createElementNS(g,t);return p(o,e,n),r&&r.appendChild(o),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.apply(void 0,[o].concat(e))}}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.map(function(t){var r=t.geometry&&t.geometry.type,o="Point"===r&&e([t.geometry.coordinates],t.properties||{})||"MultiPoint"===r&&e(t.geometry.coordinates,t.properties||{})||"LineString"===r&&e(t.geometry.coordinates,t.properties||{})||"MultiLineString"===r&&t.geometry.coordinates.map(function(n){return e(n,t.properties||{})})||"Polygon"===r&&t.geometry.coordinates.map(function(n){return e(n,t.properties||{})}).filter(function(t){return t.length>0})||"MultiPolygon"===r&&t.geometry.coordinates.map(function(n){return n.map(function(n){return e(n,t.properties||{})}).filter(function(t){return t.length>0})}).filter(function(t){return t.length>0});return n?o.length>0?a({},t,{geometry:a({},t.geometry,{coordinates:"Point"===r?o[0]:o})}):null:t}).filter(function(t){return t})}function v(t,e){return t.reduce(function(n,r,o){return n+(0===o&&"M"+r[0]+" "+r[1]||o===t.length-1&&"L"+r[0]+" "+r[1]+(e?"Z":"")||"L"+r[0]+" "+r[1])},"")}function x(t,e,n,o){var i=y((t&&t.features||[]).filter(function(t){return t&&t.geometry&&("Polygon"===t.geometry.type||"MultiPolygon"===t.geometry.type)}),function(t){return t.map(function(t){return n&&n(t)||t})}),s=Object(r.a)(a({},t,{features:i})),c=s[2]-s[0],l=s[3]-s[1],u=e.width,d=e.height,h=c/l>u/d,g=h?u:d*c/l,p=h?u*l/c:d,b=h?0:e.centered?u/2-g/2:0,m=h&&e.centered?d/2-p/2:0,v=h?g:e.centered?u/2+g/2:g,x=h&&e.centered?d/2+p/2:p;return y(i,function(t){return t.map(function(t){return[f(t[0],s[0],s[2],b,v),f(t[1],s[o?1:3],s[o?3:1],m,x)]})})}var w={create:["div","span","strong","link","canvas"],createNS:["rect","circle","path","svg","g","foreignObject","text","use","tspan"]},O=function(t,e){return function t(e,n,r,o,i){var l,u=Object.keys(r).reduce(function(t,e){return 0!==e.indexOf("@_")?a({},t):a({},t,"@_style"===e?{attributesStyle:r[e]}:{attributes:a({},t.attributes,s({},e.replace("@_",""),r[e]))})},{attributes:{}}),f=u.attributesStyle,d=u.attributes;try{l=(f||"").split(";").reduce(function(t,e){var n=e.split(":"),r=(n[0]||"").trim(),o=(n[1]||"").trim();return r?a({},t,s({},r,o)):a({},t)},{})}catch(t){l={}}var h=r["#text"],g=-1!==w.create.indexOf(n)&&b||-1!==w.createNS.indexOf(n)&&m,p=i?null:g(n,d,l,o);return h&&p&&(p().innerHTML=h),[].concat(c(i?[]:[{id:e,attributeId:d.id,key:n,type:n,node:p}]),c(Object.keys(r).filter(function(t){return"#text"!==t&&0!==t.indexOf("@_")}).reduce(function(n,a){var s=r[a].length?r[a]:[r[a]];return[].concat(c(n),c(s.reduce(function(n,r){return[].concat(c(n),c(t("".concat(e,"_").concat(a),a,r,i?o:p())))},[])))},[])))}("root","div",i.a.parse('<div class="ok">'.concat(t,"</div>"),{ignoreAttributes:!1}).div,e,!0).reduce(function(t,e){return Object.assign({},t,s({},e.attributeId||e.id,e.node))},{})}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a});function r(t,e,n){if(!a(n=n||{}))throw new Error("options is invalid");var r=n.bbox,o=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&s(r),o&&c(o);var i={type:"Feature"};return o&&(i.id=o),r&&(i.bbox=r),i.properties=e||{},i.geometry=t,i}function o(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!i(t[0][1])||!i(t[0][1]))throw new Error("coordinates must contain numbers");return r({type:"LineString",coordinates:t},e,n)}function i(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function a(t){return!!t&&t.constructor===Object}function s(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!i(t))throw new Error("bbox must only contain numbers")})}function c(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e,n){"use strict";const r=function(t,e){const n=e.exec(t);return!(null==n)};e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e){if(e){const n=Object.keys(e),r=n.length;for(let o=0;o<r;o++)t[n[o]]=e[n[o]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,n){var r={};if(!t)return e;for(let o=0;o<n.length;o++)void 0!==t[n[o]]?r[n[o]]=t[n[o]]:r[n[o]]=e[n[o]];return r},e.doesMatch=r,e.doesNotMatch=function(t,e){return!r(t,e)},e.getAllMatches=function(t,e){const n=[];let r=e.exec(t);for(;r;){const o=[],i=r.length;for(let t=0;t<i;t++)o.push(r[t]);n.push(o),r=e.exec(t)}return n}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){var e=[1/0,1/0,-1/0,-1/0];return Object(r.a)(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t,e,n){"use strict";const r=n(2),o=n(2).buildOptions,i=n(9),a={OPENING:1,CLOSING:2,SELF:3,CDATA:4};let s="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|(([\\w:\\-._]*:)?([\\w:\\-._]+))([^>]*)>|((\\/)(([\\w:\\-._]*:)?([\\w:\\-._]+))\\s*>))([^<]*)";!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const c={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",localeRange:"",tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t},stopNodes:[]};e.defaultOptions=c;const l=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","localeRange","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];e.props=l;function u(t,e){return t&&(e.trimValues&&(t=t.trim()),t=d(t=e.tagValueProcessor(t),e.parseNodeValue,e.parseTrueNumberOnly)),t}function f(t,e){if(e.ignoreNameSpace){const e=t.split(":"),n="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=n+e[1])}return t}function d(t,e,n){if(e&&"string"==typeof t){let e;return""===t.trim()||isNaN(t)?e="true"===t||"false"!==t&&t:(e=-1!==t.indexOf("0x")?Number.parseInt(t,16):-1!==t.indexOf(".")?Number.parseFloat(t):Number.parseInt(t,10),n&&(e=String(e)===t?e:t)),e}return r.isExist(t)?t:""}const h=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function g(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const n=r.getAllMatches(t,h),o=n.length,i={};for(let t=0;t<o;t++){const r=f(n[t][1],e);r.length&&(void 0!==n[t][4]?(e.trimValues&&(n[t][4]=n[t][4].trim()),n[t][4]=e.attrValueProcessor(n[t][4]),i[e.attributeNamePrefix+r]=d(n[t][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(i[e.attributeNamePrefix+r]=!0))}if(!Object.keys(i).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=i,t}return i}}e.getTraversalObj=function(t,e){e=o(e,c,l),t=t.replace(/<!--[\s\S]*?-->/g,"");const n=new i("!xml");let f=n;s=s.replace(/\[\\w/g,"["+e.localeRange+"\\w");const d=new RegExp(s,"g");let h=d.exec(t),p=d.exec(t);for(;h;){const n="]]>"===(b=h)[4]?a.CDATA:"/"===b[10]?a.CLOSING:void 0!==b[8]&&"/"===b[8].substr(b[8].length-1)?a.SELF:a.OPENING;if(n===a.CLOSING)f.parent&&h[14]&&(f.parent.val=r.getValue(f.parent.val)+""+u(h[14],e)),e.stopNodes.length&&e.stopNodes.includes(f.tagname)&&(f.child=[],null==f.attrsMap&&(f.attrsMap={}),f.val=t.substr(f.startIndex+1,h.index-f.startIndex-1)),f=f.parent;else if(n===a.CDATA)if(e.cdataTagName){const t=new i(e.cdataTagName,f,h[3]);t.attrsMap=g(h[8],e),f.addChild(t),f.val=r.getValue(f.val)+e.cdataPositionChar,h[14]&&(f.val+=u(h[14],e))}else f.val=(f.val||"")+(h[3]||"")+u(h[14],e);else if(n===a.SELF){f&&h[14]&&(f.val=r.getValue(f.val)+""+u(h[14],e));const t=new i(e.ignoreNameSpace?h[7]:h[5],f,"");h[8]&&h[8].length>0&&(h[8]=h[8].substr(0,h[8].length-1)),t.attrsMap=g(h[8],e),f.addChild(t)}else{const t=new i(e.ignoreNameSpace?h[7]:h[5],f,u(h[14],e));e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=h.index+h[1].length),t.attrsMap=g(h[8],e),f.addChild(t),f=t}h=p,p=d.exec(t)}var b;return n}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});n(1);function r(t,e,n){if(null!==t)for(var o,i,a,s,c,l,u,f,d=0,h=0,g=t.type,p="FeatureCollection"===g,b="Feature"===g,m=p?t.features.length:1,y=0;y<m;y++){c=(f=!!(u=p?t.features[y].geometry:b?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<c;v++){var x=0,w=0;if(null!==(s=f?u.geometries[v]:u)){l=s.coordinates;var O=s.type;switch(d=!n||"Polygon"!==O&&"MultiPolygon"!==O?0:1,O){case null:break;case"Point":e(l,h,y,x,w),h++,x++;break;case"LineString":case"MultiPoint":for(o=0;o<l.length;o++)e(l[o],h,y,x,w),h++,"MultiPoint"===O&&x++;"LineString"===O&&x++;break;case"Polygon":case"MultiLineString":for(o=0;o<l.length;o++){for(i=0;i<l[o].length-d;i++)e(l[o][i],h,y,x,w),h++;"MultiLineString"===O&&x++,"Polygon"===O&&w++}"Polygon"===O&&x++;break;case"MultiPolygon":for(o=0;o<l.length;o++){for("MultiPolygon"===O&&(w=0),i=0;i<l[o].length;i++){for(a=0;a<l[o][i].length-d;a++)e(l[o][i][a],h,y,x,w),h++;w++}x++}break;case"GeometryCollection":for(o=0;o<s.geometries.length;o++)r(s.geometries[o],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n,r,o,i,a,s,c,l,u,f,d=0,h="FeatureCollection"===t.type,g="Feature"===t.type,p=h?t.features.length:1;for(n=0;n<p;n++){for(s=h?t.features[n].geometry:g?t.geometry:t,l=h?t.features[n].properties:g?t.properties:{},u=h?t.features[n].bbox:g?t.bbox:void 0,f=h?t.features[n].id:g?t.id:void 0,a=(c=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=c?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(i,d,l,u,f);break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)e(i.geometries[r],d,l,u,f);break;default:throw new Error("Unknown Geometry Type")}else e(null,d,l,u,f);d++}}},function(t,e,n){"use strict";const r=n(8),o=n(4),i=n(4),a=n(2).buildOptions;e.parse=function(t,e){return e=a(e,i.defaultOptions,i.props),r.convertToJson(o.getTraversalObj(t,e),e)},e.convertTonimn=n(10).convert2nimn,e.getTraversalObj=o.getTraversalObj,e.convertToJson=r.convertToJson,e.convertToJsonString=n(11).convertToJsonString,e.validate=n(12).validate,e.j2xParser=n(13),e.parseToNimn=function(t,n,r){return e.convertTonimn(e.getTraversalObj(t,r),n,r)}},,function(t,e,n){"use strict";const r=n(2),o=function(t,e){const n={};if(!(t.child&&!r.isEmptyObject(t.child)||t.attrsMap&&!r.isEmptyObject(t.attrsMap)))return r.isExist(t.val)?t.val:"";r.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(n[e.textNodeName]=t.val),r.merge(n,t.attrsMap);const i=Object.keys(t.child);for(let r=0;r<i.length;r++){var a=i[r];if(t.child[a]&&t.child[a].length>1)for(var s in n[a]=[],t.child[a])n[a].push(o(t.child[a][s],e));else n[a]=o(t.child[a][0],e)}return n};e.convertToJson=o},function(t,e,n){"use strict";t.exports=function(t,e,n){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=n,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},function(t,e,n){"use strict";const r=function(t){return String.fromCharCode(t)},o={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},i=[o.nilChar,o.nilPremitive,o.missingChar,o.missingPremitive,o.boundryChar,o.emptyChar,o.emptyValue,o.arrayEnd,o.objStart,o.arrStart],a=function(t,e,n){if("string"==typeof e)return t&&t[0]&&void 0!==t[0].val?s(t[0].val,e):s(t,e);{const i=void 0===(r=t)?o.missingChar:null===r?o.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||o.emptyChar;if(!0===i){let r="";if(Array.isArray(e)){r+=o.arrStart;const i=e[0],l=t.length;if("string"==typeof i)for(let e=0;e<l;e++){const n=s(t[e].val,i);r=c(r,n)}else for(let e=0;e<l;e++){const o=a(t[e],i,n);r=c(r,o)}r+=o.arrayEnd}else{r+=o.objStart;const i=Object.keys(e);Array.isArray(t)&&(t=t[0]);for(let o in i){const s=i[o];let l;l=!n.ignoreAttributes&&t.attrsMap&&t.attrsMap[s]?a(t.attrsMap[s],e[s],n):s===n.textNodeName?a(t.val,e[s],n):a(t.child[s],e[s],n),r=c(r,l)}}return r}return i}var r},s=function(t){switch(t){case void 0:return o.missingPremitive;case null:return o.nilPremitive;case"":return o.emptyValue;default:return t}},c=function(t,e){return l(e[0])||l(t[t.length-1])||(t+=o.boundryChar),t+e},l=function(t){return-1!==i.indexOf(t)};const u=n(4),f=n(2).buildOptions;e.convert2nimn=function(t,e,n){return n=f(n,u.defaultOptions,u.props),a(t,e,n)}},function(t,e,n){"use strict";const r=n(2),o=n(2).buildOptions,i=n(4),a=function(t,e,n){let o="{";const i=Object.keys(t.child);for(let n=0;n<i.length;n++){var s=i[n];if(t.child[s]&&t.child[s].length>1){for(var c in o+='"'+s+'" : [ ',t.child[s])o+=a(t.child[s][c],e)+" , ";o=o.substr(0,o.length-1)+" ] "}else o+='"'+s+'" : '+a(t.child[s][0],e)+" ,"}return r.merge(o,t.attrsMap),r.isEmptyObject(o)?r.isExist(t.val)?t.val:"":(r.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(o+='"'+e.textNodeName+'" : '+(!0!==(l=t.val)&&!1!==l&&isNaN(l)?'"'+l+'"':l)),","===o[o.length-1]&&(o=o.substr(0,o.length-2)),o+"}");var l};e.convertToJsonString=function(t,e){return(e=o(e,i.defaultOptions,i.props)).indentBy=e.indentBy||"",a(t,e,0)}},function(t,e,n){"use strict";const r=n(2),o={allowBooleanAttributes:!1,localeRange:"a-zA-Z"},i=["allowBooleanAttributes","localeRange"];function a(t,e){for(var n=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var r=t.substr(n,e-n);if(e>5&&"xml"===r)return{err:{code:"InvalidXml",msg:"XML declaration allowed only at the start of the document."}};if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function s(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&0===--n)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=r.buildOptions(e,o,i);const n=[];let c=!1;"\ufeff"===t[0]&&(t=t.substr(1));const l=new RegExp("^[_w][\\w\\-.:]*$".replace("_w","_"+e.localeRange)),f=new RegExp("^([w]|_)[\\w.\\-_:]*".replace("([w","(["+e.localeRange));for(let r=0;r<t.length;r++){if("<"!==t[r]){if(" "===t[r]||"\t"===t[r]||"\n"===t[r]||"\r"===t[r])continue;return{err:{code:"InvalidChar",msg:"char "+t[r]+" is not expected ."}}}if("?"===t[++r]){if((r=a(t,++r)).err)return r}else{if("!"===t[r]){r=s(t,r);continue}{let o=!1;"/"===t[r]&&(o=!0,r++);let i="";for(;r<t.length&&">"!==t[r]&&" "!==t[r]&&"\t"!==t[r];r++)i+=t[r];if("/"===(i=i.trim())[i.length-1]){i=i.substring(0,i.length-1);continue}if(!g(i,f))return{err:{code:"InvalidTag",msg:"Tag "+i+" is an invalid name."}};const a=u(t,r);if(!1===a)return{err:{code:"InvalidAttr",msg:"Attributes for "+i+" have open quote"}};let h=a.value;if(r=a.index,"/"===h[h.length-1]){const t=d(h=h.substring(0,h.length-1),e,l);if(!0!==t)return t;c=!0}else if(o){if(h.trim().length>0)return{err:{code:"InvalidTag",msg:"closing tag "+i+" can't have attributes or invalid starting."}};{const t=n.pop();if(i!==t)return{err:{code:"InvalidTag",msg:"closing tag "+t+" is expected inplace of "+i+"."}}}}else{const t=d(h,e,l);if(!0!==t)return t;n.push(i),c=!0}for(r++;r<t.length;r++)if("<"===t[r]){if("!"===t[r+1]){r=s(t,++r);continue}break}"<"===t[r]&&r--}}}return c?!(n.length>0)||{err:{code:"InvalidXml",msg:"Invalid "+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+" found."}}:{err:{code:"InvalidXml",msg:"Start tag expected."}}};var c='"',l="'";function u(t,e){let n="",r="";for(;e<t.length;e++){if(t[e]===c||t[e]===l)if(""===r)r=t[e];else{if(r!==t[e])continue;r=""}else if(">"===t[e]&&""===r)break;n+=t[e]}return""===r&&{value:n,index:e}}const f=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function d(t,e,n){const o=r.getAllMatches(t,f),i={};for(let t=0;t<o.length;t++){if(0===o[t][1].length)return{err:{code:"InvalidAttr",msg:"attribute "+o[t][2]+" has no space in starting."}};if(void 0===o[t][3]&&!e.allowBooleanAttributes)return{err:{code:"InvalidAttr",msg:"boolean attribute "+o[t][2]+" is not allowed."}};const r=o[t][2];if(!h(r,n))return{err:{code:"InvalidAttr",msg:"attribute "+r+" is an invalid name."}};if(i.hasOwnProperty(r))return{err:{code:"InvalidAttr",msg:"attribute "+r+" is repeated."}};i[r]=1}return!0}function h(t,e){return r.doesMatch(t,e)}function g(t,e){return!r.doesNotMatch(t,e)}},function(t,e,n){"use strict";const r=n(2).buildOptions,o={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},i=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function a(t){this.options=r(t,o,i),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=g),this.options.cdataTagName?this.isCDATA=p:this.isCDATA=function(){return!1},this.replaceCDATAstr=s,this.replaceCDATAarr=c,this.options.format?(this.indentate=h,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=d,this.buildObjNode=u):(this.buildTextNode=f,this.buildObjNode=l),this.buildTextValNode=f,this.buildObjectNode=l}function s(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function c(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[n]+"]]>");return t+this.newLine}function l(t,e,n,r){return n&&!t.includes("<")?this.indentate(r)+"<"+e+n+">"+t+"</"+e+this.tagEndChar:this.indentate(r)+"<"+e+n+this.tagEndChar+t+this.indentate(r)+"</"+e+this.tagEndChar}function u(t,e,n,r){return""!==t?this.buildObjectNode(t,e,n,r):this.indentate(r)+"<"+e+n+"/"+this.tagEndChar}function f(t,e,n,r){return this.indentate(r)+"<"+e+n+">"+this.options.tagValueProcessor(""+t)+"</"+e+this.tagEndChar}function d(t,e,n,r){return""!==t?this.buildTextValNode(t,e,n,r):this.indentate(r)+"<"+e+n+"/"+this.tagEndChar}function h(t){return this.options.indentBy.repeat(t)}function g(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function p(t){return t===this.options.cdataTagName}a.prototype.parse=function(t){return this.j2x(t,0).val},a.prototype.j2x=function(t,e){let n="",r="";const o=Object.keys(t),i=o.length;for(let a=0;a<i;a++){const i=o[a];if(void 0===t[i]);else if(null===t[i])r+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if("object"!=typeof t[i]){const o=this.isAttribute(i);o?n+=" "+o+'="'+this.options.attrValueProcessor(""+t[i])+'"':this.isCDATA(i)?t[this.options.textNodeName]?r+=this.replaceCDATAstr(t[this.options.textNodeName],t[i]):r+=this.replaceCDATAstr("",t[i]):i===this.options.textNodeName?t[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+t[i])):r+=this.buildTextNode(t[i],i,"",e)}else if(Array.isArray(t[i]))if(this.isCDATA(i))r+=this.indentate(e),t[this.options.textNodeName]?r+=this.replaceCDATAarr(t[this.options.textNodeName],t[i]):r+=this.replaceCDATAarr("",t[i]);else{const n=t[i].length;for(let o=0;o<n;o++){const n=t[i][o];if(void 0===n);else if(null===n)r+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if("object"==typeof n){const t=this.j2x(n,e+1);r+=this.buildObjNode(t.val,i,t.attrStr,e)}else r+=this.buildTextNode(n,i,"",e)}}else if(this.options.attrNodeName&&i===this.options.attrNodeName){const e=Object.keys(t[i]),r=e.length;for(let o=0;o<r;o++)n+=" "+e[o]+'="'+this.options.attrValueProcessor(""+t[i][e[o]])+'"'}else{const n=this.j2x(t[i],e+1);r+=this.buildObjNode(n.val,i,n.attrStr,e)}}return{attrStr:n,val:r}},t.exports=a},function(t,e,n){"use strict";n.r(e);var r=n(0);function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}window.MapStationController=function(t){var e;try{e=JSON.parse(localStorage.getItem("mapStationControlsKeys"))}catch(t){}e||(e=[{name:"left",code:65},{name:"right",code:68},{name:"up",code:87},{name:"down",code:83},{name:"buttonA",code:32},{name:"buttonB",code:77},{name:"start",code:13},{name:"select",code:27}]);var n=document.querySelector(t);Object(r.g)('<link href="fonts/PressStart2P.css" type="text/css" rel="stylesheet" />',document.head);var s,c=Object(r.g)('\n    <svg\n        viewBox="0 0 '.concat(1056," ").concat(1056,'"\n        style="\n        position: relative;\n        width: 100%;\n        height: 100%;\n        padding: 16px;">\n        <rect x="').concat(-16,'" y="').concat(-16,'" width="').concat(1088,'" height="').concat(1088,'" fill="').concat("#f2f2f2",'"/>\n        <rect x="').concat(-8,'" y="').concat(-8,'" width="').concat(1072,'" height="').concat(1072,'" stroke="').concat("#333333",'" stroke-width="0.5" fill="transparent"/>\n        <rect id="bg" x="0" y="0" width="').concat(1056,'" height="').concat(1056,'" stroke="').concat("#333333",'" stroke-width="3" fill="transparent"/>\n        <svg\n            viewBox="0 0 ').concat(1024," ").concat(1024,'"\n            style="\n                position: absolute;\n                width: 100%;\n                height: 100%;">\n            <g>\n                <rect\n                    transform="').concat(Object(r.h)(512,512),'"\n                    fill="#777"\n                    x="').concat(-256,'"\n                    y="').concat(-128,'"\n                    width="').concat(512,'"\n                    height="').concat(256,'"/>\n                <circle\n                    transform="').concat(Object(r.h)(256,512),'"\n                    fill="#999"\n                    cx="0"\n                    cy="0"\n                    r="').concat(1024/7,'"/>\n                <circle\n                    transform="').concat(Object(r.h)(768,512),'"\n                    fill="#999"\n                    cx="0"\n                    cy="0"\n                    r="').concat(1024/7,'"/>\n            </g>\n            <rect\n                id="up"\n                transform="').concat(Object(r.h)(256,448),'"\n                fill="#333"\n                x="-24"\n                y="-32"\n                width="48"\n                height="64"\n                stroke="#888"\n                rx="8"/>\n            <rect\n                id="right"\n                transform="').concat(Object(r.h)(320,512),'"\n                fill="#333"\n                x="-32"\n                y="-24"\n                width="64"\n                height="48"\n                stroke="#888"\n                rx="8"/>\n            <rect\n                id="down"\n                transform="').concat(Object(r.h)(256,576),'"\n                fill="#333"\n                x="-24"\n                y="-32"\n                width="48"\n                height="64"\n                stroke="#888"\n                rx="8"/>\n            <rect\n                id="left"\n                transform="').concat(Object(r.h)(192,512),'"\n                fill="#333"\n                x="-32"\n                y="-24"\n                width="64"\n                height="48"\n                stroke="#888"\n                rx="8"/>\n            <rect\n                id="start"\n                transform="').concat(Object(r.h)(464,576),'"\n                fill="#333"\n                x="-32"\n                y="-8"\n                width="64"\n                height="16"\n                stroke="#888"\n                rx="8"/>\n            <rect\n                id="select"\n                transform="').concat(Object(r.h)(560,576),'"\n                fill="#333"\n                x="-32"\n                y="-8"\n                width="64"\n                height="16"\n                stroke="#888"\n                rx="8"/>\n            <circle\n                id="buttonA"\n                transform="').concat(Object(r.h)(720,528),'"\n                fill="#333"\n                cx="0"\n                cy="0"\n                r="32"/>\n            <text\n                x="').concat(720,'"\n                y="').concat(528,'"\n                fill="#fff"\n                font-size="24"\n                font-family="PressStart2P"\n                text-anchor="middle"\n                alignment-baseline="central"\n                style="pointer-events: none;">\n                A\n            </text>\n            <circle\n                id="buttonB"\n                transform="').concat(Object(r.h)(816,496),'"\n                fill="#333"\n                cx="0"\n                cy="0"\n                r="32"/>\n            <text\n                x="').concat(816,'"\n                y="').concat(496,'"\n                fill="#fff"\n                font-size="24"\n                font-family="PressStart2P"\n                text-anchor="middle"\n                alignment-baseline="central"\n                style="pointer-events: none;">\n                B\n            </text>\n            <text\n                id="title"\n                x="').concat(512,'"\n                y="').concat(960,'"\n                fill="#555"\n                font-size="24"\n                font-family="PressStart2P"\n                text-anchor="middle"\n                alignment-baseline="central"/>\n            <text\n                x="').concat(512,'"\n                y="96"\n                fill="#555"\n                font-size="64"\n                font-family="PressStart2P"\n                text-anchor="middle"\n                alignment-baseline="central">\n                MAP STATION\n            </text>\n            ').concat(e.map(function(t,e){var n=t.name,r=t.code;return'<text\n                    id="label_'.concat(n,'"\n                    x="').concat(512,'"\n                    y="').concat(3379.2/5+32*e,'"\n                    fill="#555"\n                    font-size="16"\n                    font-family="PressStart2P"\n                    text-anchor="middle"\n                    alignment-baseline="central">\n                    ').concat(n," -> key code: ").concat(r,"\n                </text>")}).join("\n"),'\n            <text\n                id="keyCode"\n                x="').concat(512,'"\n                y="').concat(256,'"\n                fill="#555"\n                font-size="32"\n                font-family="PressStart2P"\n                text-anchor="middle"\n                alignment-baseline="central"/>\n        </svg>\n    </svg>\n    '),n),l=c.title,u=c.keyCode,f=c.bg,d=a(c,["title","keyCode","bg"]),h=Object.keys(d).reduce(function(t,e){return 0===e.indexOf("label_")?o({},t,{labels:o({},t.labels,i({},e.replace("label_",""),d[e]))}):o({},t,{buttons:o({},t.buttons,i({},e,d[e]))})},{labels:{},buttons:{}}),g=h.buttons,p=h.labels,b="CLICK ON A BUTTON TO CHANGE KEY BINDING";l().innerHTML=b;f().onclick=function(){s&&(l().innerHTML=b,g[s]({stroke:"none","stroke-width":0}),p[s]({stroke:"transparent"}),s=null,u().innerHTML="")},window.addEventListener("keydown",function(t){if(s){e=e.map(function(e){return e.name===s?o({},e,{code:t.keyCode}):e});try{localStorage.setItem("mapStationControlsKeys",JSON.stringify(e))}catch(t){}l().innerHTML=b,g[s]({stroke:"none","stroke-width":0}),p[s]().innerHTML="".concat(s," -> key code: ").concat(t.keyCode),s=null}else{u().innerHTML="key code: ".concat(t.keyCode);var n=e.map(function(e){var n=e.code,r=e.name;return n===t.keyCode?r:null}).filter(function(t){return t})[0];n&&(g[n]({stroke:"#aaff33","stroke-width":4}),p[n]({stroke:"#aaff33"}))}}),window.addEventListener("keyup",function(){Object.keys(g).filter(function(t){return-1===t.indexOf("root")}).forEach(function(t){g[t]({stroke:"none","stroke-width":0})}),Object.keys(p).forEach(function(t){p[t]({stroke:"transparent"})}),u().innerHTML=""}),Object.keys(g).filter(function(t){return-1===t.indexOf("root")}).forEach(function(t){g[t]().onclick=function(){if(s)return null;l().innerHTML='TYPE ON THE KEYBOARD TO SET\n                <tspan\n                    fill="#000"\n                    stroke="'.concat("#ffaa00",'"\n                    alignment-baseline="central"\n                    style="font-weight: bold;">').concat(t.toUpperCase(),"<tspan>"),s=t,g[t]({stroke:"#ffaa00","stroke-width":4}),p[s]({stroke:"#ffaa00"})}})}}]);